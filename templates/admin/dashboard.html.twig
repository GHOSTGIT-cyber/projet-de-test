{% extends 'base.html.twig' %}

{% block title %}Dashboard Admin{% endblock %}

{% block body %}
<div class="container">
    {% include 'admin/partials/sidebar.html.twig' %}

    <section class="main-content">

        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="{{ label == 'error' ? 'error-message' : 'success-message' }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}

        <h1 class="page-title">Tableau de Bord</h1>

        <section class="dashboard-card">
            <div class="dashboard-info">
                <p>Bienvenue <span class="username">{{ firstname }}</span>.</p>
                <p>Gérez les utilisateurs, les émargements et les paramètres du système depuis cet espace.</p>
                <div class="date-and-stats">
                    <div class="date">Aujourd'hui<br>
                        <span>{{ currentDate }}</span>
                    </div>
                    <div class="stats-summary">
                        <div class="stats-emargements">
                            <span class="emargement-stat">{{ sessionsToday }}</span>
                            <p>feuilles démarrées</p>
                        </div>
                        <a href="{{ path('admin_create_session') }}" class="button button--primary">Créer une feuille</a>
                    </div>
                </div>
            </div>
            <img src="{{ asset('images/dashboard_principal.png') }}" alt="Dashboard Illustration">
        </section>

        <!-- Section Statistiques -->
        <section class="stats">
            <h2>Statistiques</h2>
            <div class="stat-item">
                <h3>{{ apprenants }}</h3>
                <p>Apprenants</p>
            </div>
            <div class="stat-item">
                <h3>{{ formateurs }}</h3>
                <p>Formateurs</p>
            </div>
            <div class="stat-item">
                <h3>{{ sessions }}</h3>
                <p>Émargements</p>
            </div>
        </section>

        <!-- Section Options -->
        <section class="options">
            <div class="option card">
                <a href="{{ path('admin_create_user') }}">
                    <button class="option-icon button button--primary">+</button>
                </a>
                <p>Ajouter un nouvel utilisateur</p>
            </div>

            <div class="option card">
                <a href="{{ path('admin_parametres') }}">
                    <button class="option-icon button button--primary">
                        <img src="{{ asset('/icons/settings.svg') }}" alt="Paramètres" class="icon">
                    </button>
                </a>
                <p>Paramètres de l'organisme</p>
            </div>
        </section>

    </section>
</div>
{% endblock %}
